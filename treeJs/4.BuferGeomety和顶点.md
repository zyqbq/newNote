## 通过缓冲类型几何体创建物体

### 缓冲类型几何体 BufferGeometry

没有任何形状的空几何体

```js
const geometry = new THREE.BufferGeometry(); //创建一个几何体对象
```

### 类型化数组 Float32Array

![image-20230722160321280](../../assests/image-20230722160321280.png)

### BufferAttribute

属性缓冲对象

将类型化数组转换为属性缓冲器对象

attributes属性的意思

![image-20230722160909922](../../assests/image-20230722160909922.png)

设置几何体的顶点数据

![image-20230722161013322](../../assests/image-20230722161013322.png)

### 点模型

![image-20230722161512280](../../assests/image-20230722161512280.png)

```js
// 点渲染模式
const material = new THREE.PointsMaterial({
  color: 0xffff00,
  size: 10.0, //点对象像素尺寸
});
const points = new THREE.Points(geometry, material); //点模型对象
```

### 线模型

```js
// 线条渲染模式
const material = new THREE.LineBasicMaterial({
  color: 0xffff00, //线条颜色
}); //材质对象
// 创建线模型对象   构造函数：Line、LineLoop、LineSegments
const line = new THREE.Line(geometry, material); //线条模型对象
```

循环线模型 首尾会连接

![image-20230722162136130](../../assests/image-20230722162136130.png)

非连续的 两两相连

![image-20230722162239117](../../assests/image-20230722162239117.png)

### 网格模型正反面

顶点数据三个为一组

![image-20230722162526731](../../assests/image-20230722162526731.png)

`逆时针顶点连接为正面`

#### 网格正反面是否可见设置

![image-20230722162745234](../../assests/image-20230722162745234.png)

### 两个三角形拼接为面

每三个顶点的旋转方向要一致

```js
const vertices = new Float32Array([
  0,
  0,
  0, //顶点1坐标
  80,
  0,
  0, //顶点2坐标
  80,
  80,
  0, //顶点3坐标

  0,
  0,
  0, //顶点4坐标   和顶点1位置相同
  80,
  80,
  0, //顶点5坐标  和顶点3位置相同
  0,
  80,
  0, //顶点6坐标
]);
```

### 按索引构建三角形

012 023

![image-20230722165524410](../../assests/image-20230722165524410.png)

```js
// Uint16Array类型数组创建顶点索引数据
//Uint16Array整数类型数组
const indexes = new Uint16Array([0, 1, 2, 0, 2, 3]);
// BufferAttribute表示顶点索引属性的值
geometry.index = new THREE.BufferAttribute(indexes, 1); //1个为一组
```

### 顶点法向量

法线和光照方向有关

受光照影响的材质需要设置法向量

无索引时设置顶点法向量

法向量决定光照，`和物体光照的棱角感有关`

```js
// 每个顶点的法线数据和顶点位置数据一一对应
const normals = new Float32Array([
  0,
  0,
  1, //顶点1法线( 法向量 )
  0,
  0,
  1, //顶点2法线
  0,
  0,
  1, //顶点3法线
  0,
  0,
  1, //顶点4法线
  0,
  0,
  1, //顶点5法线
  0,
  0,
  1, //顶点6法线
]);
// 设置几何体的顶点法线属性.attributes.normal
geometry.attributes.normal = new THREE.BufferAttribute(normals, 3); //3个为一组,表示一个顶点的法线数据
```

```js
// 每个顶点的法线数据和顶点位置数据一一对应
const normals = new Float32Array([
  0,
  0,
  1, //顶点1法线( 法向量 )
  0,
  0,
  1, //顶点2法线
  0,
  0,
  1, //顶点3法线
  0,
  0,
  1, //顶点4法线
]);
// 设置几何体的顶点法线属性.attributes.normal
geometry.attributes.normal = new THREE.BufferAttribute(normals, 3); //3个为一组,表示一个顶点的法线数据
```

### BufferGeometry

几何体的父类

位置属性 .attributes.position

### 材质的线框属性

![image-20230722224538869](../../assests/image-20230722224538869.png)

### 几何体的方法

本质是改变几何体的顶点数据

![image-20230722225404610](../../assests/image-20230722225404610.png)

```js
const geometry = new THREE.PlaneGeometry(100, 100); //矩形平面几何体

// 几何体xyz三个方向都放大2倍
geometry.scale(2, 2, 2);
// 几何体沿着x轴平移50
geometry.translate(50, 0, 0);
// 几何体绕着x轴旋转45度 Math.PI是180度
geometry.rotateX(Math.PI / 4);

// 居中：偏移的几何体居中，你可以看到几何体重新与坐标原点重合
geometry.center();
```
