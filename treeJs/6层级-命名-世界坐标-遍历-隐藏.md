### Group

![image-20230723163152179](../../assests/image-20230723163152179.png)

将网格模型添加到 group 中

```js
const group = new THREE.Group();

//把mesh1型插入到组group中，mesh1作为group的子对象
group.add(mesh1);
//把mesh2型插入到组group中，mesh2作为group的子对象
group.add(mesh2);

scene.add(group); //组对象添加到场景中
```

### group.children 子对象

添加到组对象中的子对象的`数组合集`

光源也是场景中的子对象

### .add()方法

继承自 Obeject3D

添加多个 mesh 到 group 中

```js
group.add(mesh1,mesh2）
```

### group 缩放旋转

子对象会跟随改变

### Object3D

因为 group 的属性和方法基本都继承自 Object3D

所以 group 和 Object3D 可以替换使用

但是 group 更加有语义化，所以更常用 group

![image-20230723164805490](../../assests/image-20230723164805490.png)

### mesh 中添加 mesh

![image-20230723164920669](../../assests/image-20230723164920669.png)

### 模型命名.name

继承自 Obejct3D

```js
mesh.name = "命名";
```

### 递归遍历 traverse

继承自 Obejct3D

可以遍历出树结构的每一个节点

group mesh 都可以

![image-20230723165806212](../../assests/image-20230723165806212.png)

```js
// 递归遍历model包含所有的模型节点
model.traverse(function (obj) {
  console.log("所有模型节点的名称", obj.name);
  // obj.isMesh：if判断模型对象obj是不是网格模型'Mesh'
  if (obj.isMesh) {
    //判断条件也可以是obj.type === 'Mesh'
    obj.material.color.set(0xffff00); //改变颜色
  }
});
```

### 根据模型的 name 查找 getObjectByName

```js
const mesh = model.getObjectByName("2号楼");
```

# 本地坐标和世界坐标

本地坐标位置.postion

世界坐标就是`本地坐标和所有父对象的postion累加起来`

### getWorldPosition()

能够得到物体的世界坐标，也就是累计的坐标

没有渲染时，获取世界坐标必须先更新世界矩阵，渲染时会自动更新世界坐标

![image-20230822124111264](../../assests/image-20230822124111264.png)

```js
// 声明一个三维向量用来表示某个坐标
const worldPosition = new THREE.Vector3();
// 获取mesh的世界坐标，你会发现mesh的世界坐标受到父对象group的.position影响
mesh.getWorldPosition(worldPosition);
```

### 获取世界缩放参数

.getWorldScale()

### 世界矩阵和本地矩阵

对象本身和所有父对象本地矩阵的乘积-世界矩阵

scene的本地矩阵和世界矩阵一样

### 子对象添加局部坐标系

局部坐标会跟随子对象移动

<img src="../../assests/image-20230723171202974.png" alt="image-20230723171202974" style="zoom: 50%;" />

```js
//可视化mesh的局部坐标系
const meshAxesHelper = new THREE.AxesHelper(50);
mesh.add(meshAxesHelper);
```

### 改变局部坐标系

旋转时，不再绕中心旋转，而是绕移动后的局部坐标旋转

实际是改变`顶点坐标`

```js
// 平移几何体的顶点坐标,改变几何体自身相对局部坐标原点的位置
geometry.translate(50 / 2, 0, 0);
```

### 移除子对象

继承自 Obejct3D

可以删除光源 模型

```js
group.remove(mesh1，mesh2);
```

### 隐藏显示模型.visible

继承自 Obejct3D

```js
mesh.visible = false; // 隐藏一个网格模型，visible的默认值是true
group.visible = false; // 隐藏一个包含多个模型的组对象group

mesh.visible = true; // 使网格模型mesh处于显示状态
```

材质的 visible 属性 继承自 Material 也可以隐藏模型

```js
mesh1.material.visible = false; // 如果多个模型引用了同一个材质，如果该材质`.visible`设置为false，意味着隐藏绑定该材质的所有模型。
```
